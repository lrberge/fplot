<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exporting graphs • fplot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Exporting graphs">
<meta property="og:description" content="fplot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Exporting_graphs.html">Exporting graphs</a>
    </li>
    <li>
      <a href="../articles/fplot_walkthrough.html">fplot walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Exporting graphs</h1>
                        <h4 data-toc-skip class="author">Laurent
Berge</h4>
            
            <h4 data-toc-skip class="date">07/05/2020</h4>
      
      
      <div class="hidden name"><code>Exporting_graphs.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="exporting-graphs-with-fplot">Exporting graphs with <code>fplot</code><a class="anchor" aria-label="anchor" href="#exporting-graphs-with-fplot"></a>
</h2>
<p>Exporting a graph is often a chore, especially if you want to have
the best looking graphs in your publications. One common problem is that
it is usually difficult to predict how the text contained in the graph
will look once in its final location (i.e. in your document). You may
end up with text looking either too big or too small.</p>
<p><code>fplot</code> provides a set of tools to simplify graph
exportation. This is achieved thanks to a different philosophy from
existing export functions: instead of giving the target size of the
figure (width/height), just give the desired point size of the text. The
graph will be created such that once it’s in your final document, the
size of the text in the graph will be equal to the desired point
size.</p>
<p>In essence, it’s a reparametrization of existing export functions.
Below a simple example is detailed.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>You can export any kind of graph with the functions
<code>pdf_fit</code>, <code>png_fit</code>, etc, which are the
<code>fplot</code> versions of <code>pdf</code>, <code>png</code>,
etc.</p>
<p>But first things first, you need to provide the size the image will
take in your final document.</p>
<p>By default, the target location of the graph is a <em>US letter</em>
page with “normal” margins (i.e. 2.5cm left and right, 2cm top and
bottom). You can change it globally with the function
<code>setFplot_page</code>. Let’s change it to A4 and one inch margins
on all sides:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">fplot</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/setFplot_page.html">setFplot_page</a></span><span class="op">(</span>page <span class="op">=</span> <span class="st">"a4"</span>, margins <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>Now let’s go for the first export:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pdf_fit.html">pdf_fit</a></span><span class="op">(</span><span class="st">"first_export.pdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"n"</span>, ann <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="st">"This text will be displayed in 10pt."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fit.off.html">fit.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can notice that in the end of the export, <code>fit.off</code> is
used in lieu of <code>dev.off</code>. This function does the same thing
as <code>dev.off</code> but also displays the exported graph in the
Viewer pane of RStudio (provided you use it). This way you can directly
see how the exported graph looks.</p>
<p>What about the geometry of the graph? By default the width of the
plot is 100% of the text width. You can change it with the
<code>width</code> argument: e.g. using relative widths
<code>width = 0.5</code> (50% of the text width),
<code>width = "50%"</code> (idem), or absolute widths
<code>width = "10cm"</code>, <code>width = "5in"</code>, etc.</p>
<p>The width to height ratio can be modified with the <code>w2h</code>
argument (or you can use <code>h2w</code> for the inverse ratio). The
default is <code>w2h = 1.75</code> (close to the Golden ratio).</p>
<p>Finally the default point size is <code>pt = 10</code>. If embedded
in an A4 page with 1 inch margins on both sides, the text of the
previously exported graph would be in 10pt:</p>
<div class="float">
<img src="https://github.com/lrberge/fplot/blob/master/vignettes/images/export/example_10pt.png?raw=true" alt="Figure 1: Text in 10pt."><div class="figcaption">Figure 1: Text in 10pt.</div>
</div>
<p>If you increase the pt size that’s what you would get:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pdf_fit.html">pdf_fit</a></span><span class="op">(</span><span class="st">"second_export.pdf"</span>, pt <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"n"</span>, ann <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="st">"This text will be displayed in 12pt."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fit.off.html">fit.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/lrberge/fplot/blob/master/vignettes/images/export/example_12pt.png?raw=true" alt="Figure 2: Text in 12pt."><div class="figcaption">Figure 2: Text in 12pt.</div>
</div>
<p>Now any text is larger, and since there is text in the margins, the
plotting region becomes smaller.</p>
<p>With this way of exporting, you need to worry only on two things: 1)
the final text size of the graph (and you should be worried about it
anyway) that you can provide explicitly, and 2) the width to height
ratio of the graph.</p>
<p>To create the same graph as before but which would take the total
height of the page, just use the argument <code>height = 1</code>
(<code>height = 100%</code> or <code>height = 1th</code> [th: text
height] would also work):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pdf_fit.html">pdf_fit</a></span><span class="op">(</span><span class="st">"third_export.pdf"</span>, pt <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"n"</span>, ann <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="st">"This text will be displayed in 12pt."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fit.off.html">fit.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/lrberge/fplot/blob/master/vignettes/images/export/example_12pt_tall.png?raw=true" alt="Figure 3: Text in 12pt, total page height."><div class="figcaption">Figure 3: Text in 12pt, total page height.</div>
</div>
<p>Finally if you use <code>sideways = TRUE</code>, the settings become
<code>width = 1th</code> (100% text height) and
<code>height = 0.9tw</code> (90% text width), i.e. the graph would take
the full page except a 10% space left for the graph legend.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You can also set the point size globally</span></span>
<span><span class="fu"><a href="../reference/setFplot_page.html">setFplot_page</a></span><span class="op">(</span>pt <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> </span>
<span><span class="fu"><a href="../reference/pdf_fit.html">pdf_fit</a></span><span class="op">(</span><span class="st">"fourth_export.pdf"</span>, sideways <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"n"</span>, ann <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="st">"This text will be displayed in 12pt."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fit.off.html">fit.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/lrberge/fplot/blob/master/vignettes/images/export/example_12pt_sideways.png?raw=true" alt="Figure 4: Text in 12pt, sideways."><div class="figcaption">Figure 4: Text in 12pt, sideways.</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
